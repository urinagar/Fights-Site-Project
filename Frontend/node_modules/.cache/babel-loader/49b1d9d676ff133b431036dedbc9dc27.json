{"ast":null,"code":"import _slicedToArray from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{Navigate,Route,Routes}from\"react-router\";import{authStore,vacationsStore}from\"../../../Redux/Store\";import Login from\"../../AuthArea/Login/Login\";import Logout from\"../../AuthArea/Logout/Logout\";import Register from\"../../AuthArea/Register/Register\";import Home from\"../../HomeArea/Home/Home\";import AddVacation from\"../../VacationArea/AddVacation/AddVacation\";import BarChart from\"../../VacationArea/BarChart/BarChart\";import DeleteVacation from\"../../VacationArea/DeleteVacation/DeleteVacation\";import UpdateVacation from\"../../VacationArea/UpdateVacation/UpdateVacation\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Router(){var _useState=useState(authStore.getState().user),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var unsubscribeMe=authStore.subscribe(function(){setUser(authStore.getState().user);});var _useState3=useState(vacationsStore.getState().vacations),_useState4=_slicedToArray(_useState3,2),vacations=_useState4[0],setVacations=_useState4[1];var unsubscribeMeVacations=vacationsStore.subscribe(function(){setVacations(vacationsStore.getState().vacations);});useEffect(function(){return function(){setUser(undefined);unsubscribeMe();unsubscribeMeVacations();};},[]);return/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/register\",element:/*#__PURE__*/_jsx(Register,{})}),/*#__PURE__*/_jsx(Route,{path:\"/logout\",element:/*#__PURE__*/_jsx(Logout,{})}),/*#__PURE__*/_jsx(Route,{path:\"/home\",element:user?/*#__PURE__*/_jsx(Home,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),user&&/*#__PURE__*/_jsx(Route,{path:\"/vacations-graph\",element:user.role===\"Admin\"?/*#__PURE__*/_jsx(BarChart,{vacations:vacations}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\"})}),user&&/*#__PURE__*/_jsx(Route,{path:\"/add-vacation\",element:user.role===\"Admin\"?/*#__PURE__*/_jsx(AddVacation,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\"})}),user&&/*#__PURE__*/_jsx(Route,{path:\"/edit-vacation\",element:user.role===\"Admin\"?/*#__PURE__*/_jsx(UpdateVacation,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\"})}),user&&/*#__PURE__*/_jsx(Route,{path:\"/delete-vacation/:vacationId\",element:user.role===\"Admin\"?/*#__PURE__*/_jsx(DeleteVacation,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/home\"})}),/*#__PURE__*/_jsx(Route,{path:\"/\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/home\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:user?/*#__PURE__*/_jsx(Navigate,{to:\"/home\"}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]});}export default Router;","map":{"version":3,"sources":["C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/src/Components/LayoutArea/Router/Router.tsx"],"names":["useEffect","useState","Navigate","Route","Routes","authStore","vacationsStore","Login","Logout","Register","Home","AddVacation","BarChart","DeleteVacation","UpdateVacation","Router","getState","user","setUser","unsubscribeMe","subscribe","vacations","setVacations","unsubscribeMeVacations","undefined","role"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { Navigate, Route, Routes } from \"react-router\";\nimport { Unsubscribe } from \"redux\";\nimport UserModel from \"../../../Models/UserModel\";\nimport VacationModel from \"../../../Models/VacationModel\";\nimport { authStore, vacationsStore } from \"../../../Redux/Store\";\nimport Login from \"../../AuthArea/Login/Login\";\nimport Logout from \"../../AuthArea/Logout/Logout\";\nimport Register from \"../../AuthArea/Register/Register\";\nimport Home from \"../../HomeArea/Home/Home\";\nimport AddVacation from \"../../VacationArea/AddVacation/AddVacation\";\nimport BarChart from \"../../VacationArea/BarChart/BarChart\";\nimport DeleteVacation from \"../../VacationArea/DeleteVacation/DeleteVacation\";\nimport UpdateVacation from \"../../VacationArea/UpdateVacation/UpdateVacation\";\n\nfunction Router(): JSX.Element {\n    const [user, setUser] = useState<UserModel>(authStore.getState().user);\n    \n    const unsubscribeMe: Unsubscribe = authStore.subscribe(() => {\n        setUser(authStore.getState().user);\n    });\n\n    const [vacations, setVacations] = useState<VacationModel[]>(vacationsStore.getState().vacations);\n    \n    const unsubscribeMeVacations: Unsubscribe = vacationsStore.subscribe(() => {\n        setVacations(vacationsStore.getState().vacations);\n    });\n\n    useEffect( () => {\n        return () => {\n            setUser(undefined);\n            unsubscribeMe();\n            unsubscribeMeVacations();\n        }\n    }, []);\n\n    return (\n\t\t\t<Routes>\n                <Route path=\"/login\" element={<Login />} />\n                <Route path=\"/register\" element={<Register />} />\n                <Route path=\"/logout\" element={<Logout />} />\n                <Route path=\"/home\" element={user ? <Home /> : <Navigate to=\"/login\" />} />\n\n                {user && <Route path=\"/vacations-graph\" element = {user.role === \"Admin\"? <BarChart vacations={vacations} /> : <Navigate to=\"/home\" /> } />}\n                {user && <Route path=\"/add-vacation\" element = {user.role === \"Admin\"? <AddVacation /> : <Navigate to=\"/home\" /> } />}\n                {user && <Route path=\"/edit-vacation\" element = {user.role === \"Admin\"? <UpdateVacation /> : <Navigate to=\"/home\" /> } />}\n                {user && <Route path=\"/delete-vacation/:vacationId\" element = {user.role === \"Admin\"? <DeleteVacation /> : <Navigate to=\"/home\" /> } />}\n                \n                <Route path=\"/\" element={user ? <Navigate to=\"/home\" /> : <Navigate to=\"/login\" />}  />\n                <Route path=\"*\" element={user ? <Navigate to=\"/home\" /> : <Navigate to=\"/login\" />} />\n\n            </Routes>\n    );\n}\n\nexport default Router;\n"]},"metadata":{},"sourceType":"module"}