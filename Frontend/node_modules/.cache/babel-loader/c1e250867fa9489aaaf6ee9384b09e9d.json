{"ast":null,"code":"import _objectSpread from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _createClass from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import jwtDecode from\"jwt-decode\";export var AuthState=/*#__PURE__*/_createClass(function AuthState(){_classCallCheck(this,AuthState);this.token=null;this.user=null;this.token=localStorage.getItem(\"token\");if(this.token){var decodedData=jwtDecode(this.token);this.user=decodedData.user;}});export var AuthActionType;(function(AuthActionType){AuthActionType[\"Register\"]=\"Register\";AuthActionType[\"Login\"]=\"Login\";AuthActionType[\"Logout\"]=\"Logout\";})(AuthActionType||(AuthActionType={}));export var AuthAction=/*#__PURE__*/_createClass(function AuthAction(){_classCallCheck(this,AuthAction);this.type=void 0;this.payload=void 0;});export function registerAction(token){return{type:AuthActionType.Register,payload:token};}export function loginAction(token){return{type:AuthActionType.Login,payload:token};}export function logoutAction(){return{type:AuthActionType.Logout};}export function authReducer(){var currentAuthState=arguments.length>0&&arguments[0]!==undefined?arguments[0]:new AuthState();var action=arguments.length>1?arguments[1]:undefined;var newAuthState=_objectSpread({},currentAuthState);switch(action.type){case AuthActionType.Register:case AuthActionType.Login:newAuthState.token=action.payload;var decodedData=jwtDecode(newAuthState.token);newAuthState.user=decodedData.user;localStorage.setItem(\"token\",newAuthState.token);break;case AuthActionType.Logout:newAuthState.token=null;newAuthState.user=null;localStorage.removeItem(\"token\");break;}return newAuthState;}","map":{"version":3,"sources":["C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/src/Redux/AuthState.ts"],"names":["jwtDecode","AuthState","token","user","localStorage","getItem","decodedData","AuthActionType","AuthAction","type","payload","registerAction","Register","loginAction","Login","logoutAction","Logout","authReducer","currentAuthState","action","newAuthState","setItem","removeItem"],"mappings":"0gBAAA,MAAOA,CAAAA,SAAP,KAAsB,YAAtB,CAGA,UAAaC,CAAAA,SAAb,2BAII,oBAAoB,sCAHbC,KAGa,CAHG,IAGH,MAFbC,IAEa,CAFK,IAEL,CAChB,KAAKD,KAAL,CAAaE,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAb,CACA,GAAG,KAAKH,KAAR,CAAe,CACX,GAAMI,CAAAA,WAAW,CAAGN,SAAS,CAAC,KAAKE,KAAN,CAA7B,CACA,KAAKC,IAAL,CAAaG,WAAD,CAAqBH,IAAjC,CACH,CACJ,CAVL,EAaA,UAAYI,CAAAA,cAAZ,C,UAAYA,c,EAAAA,c,wBAAAA,c,kBAAAA,c,uBAAAA,c,GAAAA,c,MAMZ,UAAaC,CAAAA,UAAb,uFACIC,IADJ,aAEIC,OAFJ,WAKA,MAAO,SAASC,CAAAA,cAAT,CAAwBT,KAAxB,CAAmD,CACtD,MAAO,CAAEO,IAAI,CAAEF,cAAc,CAACK,QAAvB,CAAiCF,OAAO,CAAER,KAA1C,CAAP,CACH,CACD,MAAO,SAASW,CAAAA,WAAT,CAAqBX,KAArB,CAAgD,CACnD,MAAO,CAAEO,IAAI,CAAEF,cAAc,CAACO,KAAvB,CAA8BJ,OAAO,CAAER,KAAvC,CAAP,CACH,CACD,MAAO,SAASa,CAAAA,YAAT,EAAoC,CACvC,MAAO,CAAEN,IAAI,CAAEF,cAAc,CAACS,MAAvB,CAAP,CACH,CAED,MAAO,SAASC,CAAAA,WAAT,EAAmG,IAA9EC,CAAAA,gBAA8E,2DAAhD,GAAIjB,CAAAA,SAAJ,EAAgD,IAA/BkB,CAAAA,MAA+B,2CAEtG,GAAMC,CAAAA,YAAY,kBAAQF,gBAAR,CAAlB,CAEA,OAAOC,MAAM,CAACV,IAAd,EAEI,IAAKF,CAAAA,cAAc,CAACK,QAApB,CACA,IAAKL,CAAAA,cAAc,CAACO,KAApB,CACIM,YAAY,CAAClB,KAAb,CAAqBiB,MAAM,CAACT,OAA5B,CACA,GAAMJ,CAAAA,WAAW,CAAGN,SAAS,CAACoB,YAAY,CAAClB,KAAd,CAA7B,CACAkB,YAAY,CAACjB,IAAb,CAAqBG,WAAD,CAAqBH,IAAzC,CACAC,YAAY,CAACiB,OAAb,CAAqB,OAArB,CAA8BD,YAAY,CAAClB,KAA3C,EACA,MAEJ,IAAKK,CAAAA,cAAc,CAACS,MAApB,CACII,YAAY,CAAClB,KAAb,CAAqB,IAArB,CACAkB,YAAY,CAACjB,IAAb,CAAoB,IAApB,CACAC,YAAY,CAACkB,UAAb,CAAwB,OAAxB,EACA,MAdR,CAkBA,MAAOF,CAAAA,YAAP,CACH","sourcesContent":["import jwtDecode from \"jwt-decode\";\r\nimport UserModel from \"../Models/UserModel\";\r\n\r\nexport class AuthState {\r\n    public token: string = null;\r\n    public user: UserModel = null;\r\n\r\n    public constructor(){\r\n        this.token = localStorage.getItem(\"token\");\r\n        if(this.token) {\r\n            const decodedData = jwtDecode(this.token);\r\n            this.user = (decodedData as any).user;\r\n        }   \r\n    }\r\n}\r\n\r\nexport enum AuthActionType {\r\n    Register = \"Register\",\r\n    Login = \"Login\",\r\n    Logout = \"Logout\"\r\n}\r\n\r\nexport class AuthAction {\r\n    type: AuthActionType;\r\n    payload?: string\r\n}\r\n\r\nexport function registerAction(token: string): AuthAction {\r\n    return { type: AuthActionType.Register, payload: token };\r\n}\r\nexport function loginAction(token: string): AuthAction {\r\n    return { type: AuthActionType.Login, payload: token };\r\n}\r\nexport function logoutAction(): AuthAction {\r\n    return { type: AuthActionType.Logout };\r\n}\r\n\r\nexport function authReducer(currentAuthState: AuthState = new AuthState(), action: AuthAction): AuthState {\r\n\r\n    const newAuthState = { ...currentAuthState };\r\n\r\n    switch(action.type) {\r\n\r\n        case AuthActionType.Register: \r\n        case AuthActionType.Login:\r\n            newAuthState.token = action.payload;\r\n            const decodedData = jwtDecode(newAuthState.token); \r\n            newAuthState.user = (decodedData as any).user; \r\n            localStorage.setItem(\"token\", newAuthState.token);\r\n            break;\r\n\r\n        case AuthActionType.Logout:\r\n            newAuthState.token = null;\r\n            newAuthState.user = null;\r\n            localStorage.removeItem(\"token\");\r\n            break;       \r\n\r\n    }\r\n\r\n    return newAuthState;\r\n}"]},"metadata":{},"sourceType":"module"}