{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _inherits from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\user\\\\Desktop\\\\web development\\\\Lessons + Homework\\\\Third Project\\\\Fullstack\\\\Frontend\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{Component}from\"react\";import{AuthState}from\"../../../Redux/AuthState\";import{vacationsStore}from\"../../../Redux/Store\";import notifyService from\"../../../Services/NotifyfService\";import vacationsService from\"../../../Services/VacationsService\";import AdminVacationCard from\"../AdminVacationCard/AdminVacationCard\";import VacationCard from\"../VacationCard/VacationCard\";import\"./VacationsList.css\";import{jsx as _jsx}from\"react/jsx-runtime\";var VacationsList=/*#__PURE__*/function(_Component){_inherits(VacationsList,_Component);var _super=_createSuper(VacationsList);function VacationsList(){var _this;_classCallCheck(this,VacationsList);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.unSubscribeMe=void 0;_this.loggedUser=new AuthState();return _this;}_createClass(VacationsList,[{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this2=this;var vacations;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return vacationsService.getAllVacations();case 3:vacations=_context2.sent;this.setState({vacations:vacations});this.unSubscribeMe=vacationsStore.subscribe(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var vacations;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return vacationsService.getAllVacations();case 2:vacations=_context.sent;_this2.setState({vacations:vacations});case 4:case\"end\":return _context.stop();}}},_callee);})));_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);notifyService.error(_context2.t0);case 11:case\"end\":return _context2.stop();}}},_callee2,this,[[0,8]]);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"handleClick\",value:function handleClick(){}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unSubscribeMe();}},{key:\"render\",value:function render(){var _this$state,_this$state$vacations,_this3=this;return/*#__PURE__*/_jsx(\"div\",{className:\"VacationsList\",children:(_this$state=this.state)===null||_this$state===void 0?void 0:(_this$state$vacations=_this$state.vacations)===null||_this$state$vacations===void 0?void 0:_this$state$vacations.map(function(v){return/*#__PURE__*/_jsx(\"div\",{children:_this3.loggedUser.user.role===\"Admin\"?/*#__PURE__*/_jsx(AdminVacationCard,{vacation:v},v.vacationId):/*#__PURE__*/_jsx(VacationCard,{vacation:v},v.vacationId)},v.vacationId);}).reverse()});}}]);return VacationsList;}(Component);export default VacationsList;","map":{"version":3,"sources":["C:/Users/user/Desktop/web development/Lessons + Homework/Third Project/Fullstack/Frontend/src/Components/HomeArea/VacationsList/VacationsList.tsx"],"names":["Component","AuthState","vacationsStore","notifyService","vacationsService","AdminVacationCard","VacationCard","VacationsList","unSubscribeMe","loggedUser","getAllVacations","vacations","setState","subscribe","error","state","map","v","user","role","vacationId","reverse"],"mappings":"0hCAAA,OAASA,SAAT,KAA0B,OAA1B,CAGA,OAASC,SAAT,KAA0B,0BAA1B,CACA,OAASC,cAAT,KAA+B,sBAA/B,CACA,MAAOC,CAAAA,aAAP,KAA0B,kCAA1B,CACA,MAAOC,CAAAA,gBAAP,KAA6B,oCAA7B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,wCAA9B,CACA,MAAOC,CAAAA,YAAP,KAAyB,8BAAzB,CACA,MAAO,qBAAP,C,8CAMMC,CAAAA,a,uVAEMC,a,cACAC,U,CAAa,GAAIR,CAAAA,SAAJ,E,oKAErB,8MAGgCG,CAAAA,gBAAgB,CAACM,eAAjB,EAHhC,QAGcC,SAHd,gBAIQ,KAAKC,QAAL,CAAc,CAAED,SAAS,CAATA,SAAF,CAAd,EAEA,KAAKH,aAAL,CAAqBN,cAAc,CAACW,SAAf,sEAAyB,uKAClBT,CAAAA,gBAAgB,CAACM,eAAjB,EADkB,QACpCC,SADoC,eAE1C,MAAI,CAACC,QAAL,CAAc,CAAED,SAAS,CAATA,SAAF,CAAd,EAF0C,sDAAzB,GAArB,CANR,mFAYQR,aAAa,CAACW,KAAd,eAZR,sE,wIAgBA,sBAAoB,CAEnB,C,oCACD,+BAA6B,CACzB,KAAKN,aAAL,GACH,C,sBAED,iBAA6B,mDACzB,mBACI,YAAK,SAAS,CAAC,eAAf,uBACP,KAAKO,KADE,6DACP,YAAYJ,SADL,gDACP,sBAAuBK,GAAvB,CAA2B,SAAAC,CAAC,qBAAI,qBAAyB,MAAI,CAACR,UAAL,CAAgBS,IAAhB,CAAqBC,IAArB,GAA8B,OAA9B,cAAyC,KAAC,iBAAD,EAAuC,QAAQ,CAAEF,CAAjD,EAAyBA,CAAC,CAACG,UAA3B,CAAzC,cAAkG,KAAC,YAAD,EAAiC,QAAQ,CAAEH,CAA3C,EAAmBA,CAAC,CAACG,UAArB,CAA3H,EAAUH,CAAC,CAACG,UAAZ,CAAJ,EAA5B,EAAoNC,OAApN,EADO,EADJ,CAKH,C,2BAlCuBrB,S,EAsC5B,cAAeO,CAAAA,aAAf","sourcesContent":["import { Component } from \"react\";\nimport { Unsubscribe } from \"redux\";\nimport VacationModel from \"../../../Models/VacationModel\";\nimport { AuthState } from \"../../../Redux/AuthState\";\nimport { vacationsStore } from \"../../../Redux/Store\";\nimport notifyService from \"../../../Services/NotifyfService\";\nimport vacationsService from \"../../../Services/VacationsService\";\nimport AdminVacationCard from \"../AdminVacationCard/AdminVacationCard\";\nimport VacationCard from \"../VacationCard/VacationCard\";\nimport \"./VacationsList.css\";\n\ninterface VacationsListState {\n\tvacations: VacationModel[];\n}\n\nclass VacationsList extends Component<{}, VacationsListState> {\n    \n    private unSubscribeMe: Unsubscribe;\n    private loggedUser = new AuthState();\n\n    public async componentDidMount() {\n        try{\n            \n            const vacations = await vacationsService.getAllVacations();            \n            this.setState({ vacations });\n\n            this.unSubscribeMe = vacationsStore.subscribe(async () => {\n                const vacations = await vacationsService.getAllVacations();\n                this.setState({ vacations });\n            })\n        }\n        catch(err: any){\n            notifyService.error(err);\n        }\n    }\n\n    public handleClick(){\n\n    }\n    componentWillUnmount(): void {\n        this.unSubscribeMe();\n    }\n    \n    public render(): JSX.Element {\n        return (\n            <div className=\"VacationsList\">\n\t\t\t\t{this.state?.vacations?.map(v => <div key={v.vacationId}>{this.loggedUser.user.role === \"Admin\"?   <AdminVacationCard  key={v.vacationId} vacation={v} /> : <VacationCard key={v.vacationId} vacation={v} />}</div>).reverse()}\n            </div>\n        );\n    }\n\n}\n\nexport default VacationsList;\n"]},"metadata":{},"sourceType":"module"}